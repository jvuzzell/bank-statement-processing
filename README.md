# Bank Statement Processing 

This repository contains scripts to process and analyze bank statements, generating reports and statistics. The scripts are designed to be run in sequence using console commands. Below is a guide on how to set up and use the provided scripts.

## Resources
1. [Project Roadmap](/documentation/planning.md)
1. Documentation
    - [RunStatementsReport](/documentation/command_RunStatementsReports.md)
    - [PostProcessReports](/documentation/command_PostProcessReports.md)
    - [Migrate](/documentation/command_Migrate.md)
    - [ImportCsvToDatabase](/documentation/command_ImportCsvToDatabase.md)
    - [GenerateStats](/documentation/command_GenerateStats.md)

## Prerequisites

- PHP 7.4 or higher
- Composer
- SQLite (or another database supported by your application)
- Required PHP extensions (e.g., PDO, SQLite)

## Installation

1. **Clone the repository:**

    ```bash
    git clone <https://github.com/your-repo/bank-statement-processing.git>
    cd bank-statement-processing
    ```

1. **Install dependencies using Composer:**

    ```bash
    composer install
    ```

1. **Set up the database:**

Ensure your database is set up and accessible. If using SQLite, make sure the database file and its directory are writable.

## Usage

The main entry point for running scripts is console.php. The available commands can be executed sequentially to process the bank statements and generate the required reports.

1. **Setup Input Directories**
Add the following directories to your project: 

```bash
cd input
mkdir statements
mkdir data-analysis
```

1. **Add Statements** 
To add a statement, rename the statement to `FirstName-LastName_BankName[Credit|Debit|Checking|Savings]_MMYYY_Last-Four-Digits-BankAccount.ext`

Example: `Sam-Jackson_SuntrustChecking_012022_1234.pdf`


### Available Commands

1. **RunStatementsReports**

    Aggregates every transaction into a single report and targeted trends into another.

    ```bash
    php console.php RunStatementsReports
    ```

1. **PostProcessReports** (Optional)

    Allows for adjustments to the transaction and trend reports generated by RunStatementsReports.

    ```bash
    php console.php PostProcessReports
    ```

1. **Migrate**

    Executes all outstanding migrations.

    ```bash
    php console.php Migrate
    ```

1. **ImportCsvToDatabase**

    Imports data from CSV files into the database tables.

    ```bash
    php console.php ImportCsvToDatabase
    ```

1. **GenerateStats**

    Generates and caches statistics as CSV files.

    ```bash
    php console.php GenerateStats
    ```

### Running the Full Sequence

To run the full sequence of commands, you can execute them in order as shown below:

```bash
rm tmp/data/analytics-database.db &&
php console.php RunStatementsReports &&
php console.php PostProcessReports &&
php console.php Migrate &&
php console.php ImportCsvToDatabase &&
php console.php GenerateStats
```

### Project Structure

- **src/index.php**: Entry point for the application.
- **src/app.php**: Contains the sequence of console commands and instructions for running them.
- **src/console.php**: Script to handle command-line commands and map them to their respective scripts.

### Configuration

The config.php file should contain all the necessary configuration options for the application to run. Make sure to review and update it according to your environment and requirements.

### Help

To list all available commands, run:

```bash
php console.php help
```

**License**

This project is licensed under the MIT License. See the LICENSE file for details.